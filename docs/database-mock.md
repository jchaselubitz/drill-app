# Mock database reference

The current codebase ships with a mocked set of tables that mirror the future Supabase schema. The
mock data is described below so that UI development can proceed before the real database is ready.

## Tables

### `lesson_requests`
Stores metadata for each lesson request initiated by a learner.

| Column             | Type      | Notes                                       |
| ------------------ | --------- | ------------------------------------------- |
| `id`               | UUID      | Primary key generated by Supabase           |
| `user_id`          | UUID      | Nullable until auth is connected            |
| `target_language`  | text      | ISO language name or code                   |
| `native_language`  | text      | Learner native language                     |
| `proficiency`      | text      | CEFR level (A1–C2)                          |
| `topic`            | text      | Free-form topic or concept                  |
| `created_at`       | timestamptz | Defaults to `now()`                       |

### `lesson_items`
Represents individual prompts for a given lesson.

| Column             | Type      | Notes                                       |
| ------------------ | --------- | ------------------------------------------- |
| `id`               | UUID      | Primary key                                 |
| `lesson_request_id`| UUID      | Foreign key to `lesson_requests.id`         |
| `prompt`           | text      | Prompt text shown in learner's native language |
| `expected_answer`  | text      | Target language answer                      |
| `focus_words`      | text[]    | Array of highlighted vocabulary             |
| `focus_concepts`   | text[]    | Array of grammatical concepts               |
| `created_at`       | timestamptz | Defaults to `now()`                       |

### `lesson_submissions`
Tracks user answers and AI feedback for each prompt.

| Column             | Type      | Notes                                       |
| ------------------ | --------- | ------------------------------------------- |
| `id`               | UUID      | Primary key                                 |
| `lesson_id`        | UUID      | References `lesson_requests.id`             |
| `lesson_item_id`   | UUID      | References `lesson_items.id`                |
| `user_answer`      | text      | Raw user submission                         |
| `spelling_score`   | numeric   | 0–100                                       |
| `grammar_score`    | numeric   | 0–100                                       |
| `feedback`         | jsonb     | Optional structured response from AI        |
| `created_at`       | timestamptz | Defaults to `now()`                       |

### `library_items`
Holds vocabulary or concept entries the user has saved.

| Column        | Type      | Notes                                                     |
| ------------- | --------- | --------------------------------------------------------- |
| `id`          | UUID      | Primary key                                               |
| `user_id`     | UUID      | References the Supabase auth user                         |
| `lesson_id`   | UUID      | Optional origin lesson                                    |
| `type`        | text      | `'phrase'` or `'concept'`                                 |
| `content`     | text      | Required for phrases                                      |
| `translation` | text      | Optional translation                                     |
| `concept`     | text      | Required for concept entries                             |
| `description` | text      | Optional explanation                                      |
| `frequency`   | text      | `'low'`, `'medium'`, or `'high'`                          |
| `created_at`  | timestamptz | Defaults to `now()`                                     |

### `profiles`
Stores extended profile information for authenticated users.

| Column            | Type      | Notes                                          |
| ----------------- | --------- | ---------------------------------------------- |
| `id`              | UUID      | Matches Supabase auth user id                  |
| `display_name`    | text      | Optional name                                  |
| `native_language` | text      | Pre-selected for new lessons                   |
| `ai_provider`     | text      | `'openai'` or `'google'`                       |
| `default_frequency` | text    | `'low'`, `'medium'`, or `'high'`               |
| `created_at`      | timestamptz | Defaults to `now()`                          |

## Seed considerations
- When running Supabase locally, create SQL views to summarize lesson performance so the mobile app
  can fetch aggregated spelling and grammar scores quickly.
- The placeholder Supabase functions store or reference these tables but do not insert realistic
  data. Replace their stubs with AI-powered logic and any necessary security policies.
